# Discord bot for Murder Mystery

I done it! とか マダミナリンク とか便利なbotさんはたくさんあるので、基本そちらを使ってください。  
このbotを使用したことによるいかなる問題に関しても作者は責任を負いません。

botの使い方を間違えると、ゲームを破壊する可能性が高いです。よくわからない場合は使わないでください。

## Why?

いろいろ便利なbotはあれど、汎用的に使えることを意識されていて、特定のシナリオを回すときに不便なことも多いです。  
とはいえ、すべて手でやるよりは遥かにマシです。

このbotは、コマンド1つでゲーム準備から感想戦まで終えられるように作っています。  
汎用性を度外視して、シナリオごとの個別設定をつくって、それを処理しています。

汎用性を捨てたのは、基本的にGMは同じシナリオをよく回すと思っているからです。そして同じサーバで同じシナリオを何度も回すことが多いと考えています。

このbotはそれらを前提に動くようにしています。

## Benri!

* 観戦ロールはシナリオごとに共通のものを流用します
* カテゴリにprefixをつけて、同じシナリオを同時に運用できます（prefixは1231とか日付を想定してます）
* シーン切り替えのセレクトボックス操作でHO配布やロール付与を行います

## How to use?

`src/config.ts` を参考に、リポジトリルートに `config.json` を作ってください。  
その後 `npm run run` で動きます。

叩くコマンドは `/create シナリオ名 prefix`  
これだけです。

`prefix-シナリオ名` のカテゴリと、すべての必要なテキスト/ボイスチャンネル、ロールが作られます。

作られたカテゴリの中の `gm管理` というテキストチャンネルにある「シーン切り替え」をやると、シーンに応じていろんな処理を行います。

* 特定のチャンネルにテキストやファイルを送信する
* 特定のチャンネルを特定のロールに開放する
* 特定のロールのメンバーに追加でロールを付与する

などなどです。Discord APIでできるすべての処理を行えます。

逆に言うと、Discord APIでできないことはできず、Discord APIの処理をほぼ素で書く必要があります。
専用の設定ファイルとかは用意してません。

## Iketenai...

* ステートレスで動いてます。なのでカテゴリの情報取得とか毎回必要で遅いです
* シナリオ追加がだるいです。これは便利さとトレードオフだからしょうがないね
    * だるいだけならまだしも、コード書ける人にしか追加できないのはいけてない
